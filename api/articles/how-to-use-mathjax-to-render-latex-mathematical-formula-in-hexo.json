{"title":"如何在Hexo中使用Mathjax渲染LaTeX数学公式","slug":"how-to-use-mathjax-to-render-latex-mathematical-formula-in-hexo","date":"2017-09-06T01:19:34.000Z","updated":"2017-12-17T10:36:15.958Z","comments":true,"path":"api/articles/how-to-use-mathjax-to-render-latex-mathematical-formula-in-hexo.json","excerpt":null,"covers":null,"content":"<!-- build time:Sun Sep 23 2018 15:40:54 GMT+0800 (中国标准时间) --><p>平时使用markdown写文档的时候，免不了会碰到数学公式，好在有强大的<a href=\"https://www.mathjax.org/\" target=\"_blank\" rel=\"noopener\">Mathjax</a>,可以解析数学公式。</p><p>基于Hexo搭建的个人博客，默认情况下渲染数学公式会出现各种各样的问题。</p><p>Hexo默认使用&quot;hexo-renderer-marked&quot;引擎渲染markdown，该引擎会把一些特殊的markdown符号转换为相应的html标签。</p><h2 id=\"解决方案\"><a class=\"markdownIt-Anchor\" href=\"#解决方案\"></a> 解决方案</h2><p>解决方案有很多，可以网上搜下，为了节省大家的时间，这里提供亲身测试过的方法。</p><p>更换Hexo的markdown渲染引擎，用<a href=\"https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus\" target=\"_blank\" rel=\"noopener\">hexo-renderer-markdown-it-plus</a>引擎替换默认的渲染引擎<a href=\"https://github.com/hexojs/hexo-renderer-marked\" target=\"_blank\" rel=\"noopener\">hexo-renderer-marked</a>即可。</p><h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\"></a> 安装</h2><p>先卸载hexo-renderer-marked，再安装hexo-renderer-markdown-it-plus插件</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm uninstall hexo-renderer-marked --save</span><br><span class=\"line\">npm install hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure><h2 id=\"配置\"><a class=\"markdownIt-Anchor\" href=\"#配置\"></a> 配置</h2><p>安装插件后，如果未正常渲染LaTeX数学公式，在博客配置文件<code>_config.yml</code>中添加</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">markdown_it_plus:</span><br><span class=\"line\">  highlight: true</span><br><span class=\"line\">  html: true</span><br><span class=\"line\">  xhtmlOut: true</span><br><span class=\"line\">  breaks: true</span><br><span class=\"line\">  langPrefix:</span><br><span class=\"line\">  linkify: true</span><br><span class=\"line\">  typographer:</span><br><span class=\"line\">  quotes: “”‘’</span><br><span class=\"line\">  plugins:</span><br><span class=\"line\">    - plugin:</span><br><span class=\"line\">        name: markdown-it-katex</span><br><span class=\"line\">        enable: true</span><br><span class=\"line\">    - plugin:</span><br><span class=\"line\">        name: markdown-it-mark</span><br><span class=\"line\">        enable: false</span><br></pre></td></tr></table></figure><h2 id=\"文章启用mathjax\"><a class=\"markdownIt-Anchor\" href=\"#文章启用mathjax\"></a> 文章启用mathjax</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">title: Hello World</span><br><span class=\"line\">mathjax: true</span><br></pre></td></tr></table></figure><h2 id=\"加载css\"><a class=\"markdownIt-Anchor\" href=\"#加载css\"></a> 加载CSS</h2><p>最后在网页head部分加载mathjax样式表就搞定了</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;link href=&quot;https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br></pre></td></tr></table></figure><h2 id=\"举个栗子\"><a class=\"markdownIt-Anchor\" href=\"#举个栗子\"></a> 举个栗子</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$$</span><br><span class=\"line\">H=-\\sum_&#123;i=1&#125;^N (\\sigma_&#123;i&#125;^x \\sigma_&#123;i+1&#125;^x+g \\sigma_&#123;i&#125;^z)</span><br><span class=\"line\">$$</span><br><span class=\"line\"></span><br><span class=\"line\">$$</span><br><span class=\"line\">f(n) = \\begin&#123;cases&#125;</span><br><span class=\"line\"> \\frac&#123;n&#125;&#123;2&#125;,</span><br><span class=\"line\"> &amp; \\text&#123;if &#125; n\\text&#123; is even&#125;</span><br><span class=\"line\"> \\\\ 3n+1, &amp; \\text&#123;if &#125; n\\text&#123; is odd&#125;</span><br><span class=\"line\"> \\end&#123;cases&#125;</span><br><span class=\"line\">$$</span><br></pre></td></tr></table></figure><p>上面的代码渲染后显示如下：</p><p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mo>(</mo><msubsup><mi>σ</mi><mi>i</mi><mi>x</mi></msubsup><msubsup><mi>σ</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><mi>x</mi></msubsup><mo>+</mo><mi>g</mi><msubsup><mi>σ</mi><mi>i</mi><mi>z</mi></msubsup><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">H=-\\sum_{i=1}^N (\\sigma_{i}^x \\sigma_{i+1}^x+g \\sigma_{i}^z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:1.8283360000000002em\"></span><span class=\"strut bottom\" style=\"height:3.106005em;vertical-align:-1.277669em\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:.08125em\">H</span><span class=\"mord rule\" style=\"margin-right:.2777777777777778em\"></span><span class=\"mrel\">=</span><span class=\"mord rule\" style=\"margin-right:.2777777777777778em\"></span><span class=\"mord\">−</span><span class=\"mord rule\" style=\"margin-right:.16666666666666666em\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em\"><span style=\"top:-1.872331em;margin-left:0\"><span class=\"pstrut\" style=\"height:3.05em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em\"><span class=\"pstrut\" style=\"height:3.05em\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0\"><span class=\"pstrut\" style=\"height:3.05em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:.10903em\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em\"></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.7143919999999999em\"><span style=\"top:-2.4530000000000003em;margin-left:-.03588em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.247em\"></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.714392em\"><span style=\"top:-2.4530000000000003em;margin-left:-.03588em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.1130000000000004em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.305331em\"></span></span></span></span></span><span class=\"mord rule\" style=\"margin-right:.2222222222222222em\"></span><span class=\"mbin\">+</span><span class=\"mord rule\" style=\"margin-right:.2222222222222222em\"></span><span class=\"mord mathit\" style=\"margin-right:.03588em\">g</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.7143919999999999em\"><span style=\"top:-2.4530000000000003em;margin-left:-.03588em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:.05em\"><span class=\"pstrut\" style=\"height:2.7em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:.04398em\">z</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.247em\"></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p><p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if</mtext><mi>n</mi><mtext>is even</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if</mtext><mi>n</mi><mtext>is odd</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">f(n) = \\begin{cases} \\frac{n}{2}, &amp; \\text{if } n\\text{ is even} \\\\ 3n+1, &amp; \\text{if } n\\text{ is odd} \\end{cases}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:1.75em\"></span><span class=\"strut bottom\" style=\"height:3.0000299999999998em;vertical-align:-1.25003em\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:.10764em\">f</span><span class=\"mopen\">(</span><span class=\"mord mathit\">n</span><span class=\"mclose\">)</span><span class=\"mord rule\" style=\"margin-right:.2777777777777778em\"></span><span class=\"mrel\">=</span><span class=\"mord rule\" style=\"margin-right:.2777777777777778em\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em\"><span style=\"top:-3.69em\"><span class=\"pstrut\" style=\"height:3.008em\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.695392em\"><span style=\"top:-2.6550000000000002em\"><span class=\"pstrut\" style=\"height:3em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.15em\"><span class=\"pstrut\" style=\"height:3em\"></span><span class=\"stretchy\" style=\"height:.2em\"><svg width=\"400em\" height=\"0.2em\" viewbox=\"0 0 400000 200\" preserveaspectratio=\"xMinYMin slice\"><path d=\"M0 80H400000 v40H0z M0 80H400000 v40H0z\"/></svg></span></span><span style=\"top:-3.394em\"><span class=\"pstrut\" style=\"height:3em\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:.345em\"></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em\"><span class=\"pstrut\" style=\"height:3.008em\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"mord mathit\">n</span><span class=\"mord rule\" style=\"margin-right:.2222222222222222em\"></span><span class=\"mbin\">+</span><span class=\"mord rule\" style=\"margin-right:.2222222222222222em\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em\"></span></span></span></span><span class=\"arraycolsep\" style=\"width:1em\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em\"><span style=\"top:-3.69em\"><span class=\"pstrut\" style=\"height:3.008em\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathit\">n</span><span class=\"mord text\"><span class=\"mord\"> is even</span></span></span></span><span style=\"top:-2.25em\"><span class=\"pstrut\" style=\"height:3.008em\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathit\">n</span><span class=\"mord text\"><span class=\"mord\"> is odd</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em\"></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p><!-- rebuild by neat -->","categories":[],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"}]}